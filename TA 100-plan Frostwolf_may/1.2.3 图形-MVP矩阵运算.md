# 1.2 数学基础

## 1.2.3 MVP矩阵运算

### MVP矩阵的作用

* 将物体从三维空间转换到二维平面
* 可以在各个空间（坐标系）进行灵活的处理

### MVP矩阵的简单定义

* 模型矩阵（model matrix）
  * 局部坐标系（local coordinate） -> 世界坐标系（world coordinate）
* 观察矩阵（view matrix）
  * 世界坐标系（world coordinate） -> 观察坐标系（view coordinate）
* 投影矩阵（projection matrix）
  * 观察坐标系（view coordinate） -> 裁剪坐标系（clip coordinate）
* 视口变换（viewport transform）
  * 裁剪坐标系（clip coordinate） -> 屏幕坐标系（screen coordinate）



### 模型矩阵

将顶点坐标从模型空间变换到世界空间

#### 变换顺序

1. 缩放
2. 旋转
3. 平移

既是约定俗成，也是理所当然，因为以这样的顺序进行变换从人的观感上来看也更自然。



### 观察矩阵

将顶点坐标从世界空间变换到观察空间

#### 观察空间

* 以摄像机位置为原点的坐标系产生的空间
* 摄像机的前方表示这个坐标系的Z轴
* 摄像机的上方表示这个坐标系的Y轴
* 摄像机的X轴的方向根据不同的规则（左手/右手坐标系）指向与Y轴和Z轴垂直的两个相反方向

#### 变换顺序

当摄像机作为世界坐标系下的一个物体时，将它从模型空间变换到观察空间也是以上面的顺序。而由于摄像机本身相当于一个没有体积的点，将其缩放没有意义，因此仅剩下旋转和平移。

想要将场景中的物体从世界空间变换到观察空间，我们可以想象：

* 将摄像机从模型空间变换到观察空间的变换取反，也就是：
  * 先逆平移，将摄像机坐标移动到世界坐标的原点
  * 再逆旋转，将摄像机坐标旋转至
    * 摄像机的Y轴与世界坐标系的Y轴重合
    * 摄像机的Z轴与世界坐标系的-Z轴重合
      * 这是约定俗成的一个规则，初始摄像机总看向世界空间Z轴的负方向，因此总把该方向看作摄像机的正方向
    * 
